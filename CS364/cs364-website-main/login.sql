DROP TABLE USERS CASCADE;
DROP TABLE RENTAL;
DROP TABLE PARENT;
DROP TABLE REHEARSAL;
DROP TABLE ORCHESTRA_MEMBER;
DROP TABLE ORCHESTRA_GROUP;

CREATE TABLE USERS(
	USERNAME VARCHAR(255) NOT NULL,
    PASSWORD_HASH VARCHAR(255) NOT NULL,
	USER_ADMIN BOOLEAN,
	PRIMARY KEY (USERNAME)
	
);

CREATE TABLE RENTAL(
	SERIAL_NUMBER INTEGER NOT NULL,
	INSTRUMENT_TYPE VARCHAR(100) NOT NULL,
	CHECKED_IN BOOLEAN NOT NULL,
	USERNAME VARCHAR(100),
	PRIMARY KEY(SERIAL_NUMBER),
	FOREIGN KEY (USERNAME) REFERENCES USERS(USERNAME)
	ON UPDATE CASCADE ON DELETE CASCADE
);

CREATE TABLE PARENT(
	EMAIL VARCHAR(100) NOT NULL,
	FIRSTNAME VARCHAR(100) NOT NULL,
	LASTNAME VARCHAR(100) NOT NULL,
	PHONENUM VARCHAR(100) NOT NULL,
	PRIMARY KEY (EMAIL),
	FOREIGN KEY (EMAIL) REFERENCES USERS (USERNAME)
	ON UPDATE CASCADE ON DELETE CASCADE
);

CREATE TABLE REHEARSAL(
	REHEARSAL_NUMBER INTEGER NOT NULL,
	REHEARSAL_LOCATION VARCHAR(100) NOT NULL,
	REHEARSAL_TIME INTEGER,
	ABSENCE_NUMBER INTEGER,
	PRIMARY KEY (REHEARSAL_NUMBER)
);

CREATE TABLE ORCHESTRA_MEMBER(
	EMAIL VARCHAR(100) NOT NULL,
	PHONE_NUMBER VARCHAR(100) NOT NULL,
	FIRSTNAME VARCHAR(100) NOT NULL,
	LASTNAME VARCHAR(100) NOT NULL,
	INSTRUMENT VARCHAR(100) NOT NULL,
	ABSENCE_NUMBER INTEGER NOT NULL,
	PRIMARY KEY(EMAIL, FIRSTNAME),
	FOREIGN KEY(EMAIL) REFERENCES USERS(USERNAME)
	ON UPDATE CASCADE ON DELETE CASCADE
);

CREATE TABLE ORCHESTRA_GROUP(
	ORCHESTRA_LEVEL INTEGER,
	EMAIL VARCHAR(100),
	FIRSTNAME VARCHAR(100),
	PRIMARY KEY (EMAIL, FIRSTNAME),
	FOREIGN KEY (EMAIL) REFERENCES USERS (USERNAME)
	ON UPDATE CASCADE ON DELETE CASCADE
);

--password: Hazel123
INSERT INTO USERS (USERNAME, PASSWORD_HASH, USER_ADMIN)
VALUES ('tanyasong@hotmail.com', '$2y$10$hP9ZX0P9FIKIB.SArXnfXe38r/SMsF3RUKndqLDxMS0SvtQE/YPP.', true);
--password: password123
INSERT INTO USERS (USERNAME, PASSWORD_HASH, USER_ADMIN)
VALUES ('calebsong@gmail.com', '$2y$10$3bY834KOXb/ix5OnM0LEku19iWVnW3i5pXkrbWyXKO.5ewKTcxYcy', false);
INSERT INTO USERS (USERNAME, PASSWORD_HASH, USER_ADMIN)
VALUES ('johndoe@gmail.com', '$2y$10$3bY834KOXb/ix5OnM0LEku19iWVnW3i5pXkrbWyXKO.5ewKTcxYcy', false);
INSERT INTO USERS (USERNAME, PASSWORD_HASH, USER_ADMIN)
VALUES ('janedoe@gmail.com', '$2y$10$3bY834KOXb/ix5OnM0LEku19iWVnW3i5pXkrbWyXKO.5ewKTcxYcy', false);


INSERT INTO RENTAL (SERIAL_NUMBER, INSTRUMENT_TYPE, CHECKED_IN, USERNAME)
VALUES (100001, 'Violin', false, 'calebsong@gmail.com');
INSERT INTO RENTAL (SERIAL_NUMBER, INSTRUMENT_TYPE, CHECKED_IN, USERNAME)
VALUES (200001, 'Cello', FALSE, 'johndoe@gmail.com');
INSERT INTO RENTAL (SERIAL_NUMBER, INSTRUMENT_TYPE, CHECKED_IN, USERNAME)
VALUES (100002, 'Violin', FALSE, 'johndoe@gmail.com');
INSERT INTO RENTAL (SERIAL_NUMBER, INSTRUMENT_TYPE, CHECKED_IN, USERNAME)
VALUES (200002, 'Cello', FALSE, 'johndoe@gmail.com');
INSERT INTO RENTAL (SERIAL_NUMBER, INSTRUMENT_TYPE, CHECKED_IN)
VALUES (200003, 'Cello', True);
INSERT INTO RENTAL (SERIAL_NUMBER, INSTRUMENT_TYPE, CHECKED_IN)
VALUES (100003, 'Violin', True);



INSERT INTO PARENT (EMAIL, FIRSTNAME, LASTNAME, PHONENUM)
VALUES ('calebsong@gmail.com', 'Tanya', 'Song', '111-111-1111');
INSERT INTO PARENT (EMAIL, FIRSTNAME, LASTNAME, PHONENUM)
VALUES ('johndoe@gmail.com', 'John', 'Doe', '222-222-2222');
INSERT INTO PARENT (EMAIL, FIRSTNAME, LASTNAME, PHONENUM)
VALUES ('janedoe@gmail.com', 'Jane', 'Doe', '333-333-3333');


INSERT INTO REHEARSAL (REHEARSAL_NUMBER, REHEARSAL_LOCATION, REHEARSAL_TIME, ABSENCE_NUMBER)
VALUES (1, 'Berkeley Middle School', 1830, 0);
INSERT INTO REHEARSAL (REHEARSAL_NUMBER, REHEARSAL_LOCATION, REHEARSAL_TIME, ABSENCE_NUMBER)
VALUES (2, 'Berkeley Middle School', 1830, 0);
INSERT INTO REHEARSAL (REHEARSAL_NUMBER, REHEARSAL_LOCATION, REHEARSAL_TIME, ABSENCE_NUMBER)
VALUES (3, 'Berkeley Middle School', 1830, 0);



INSERT INTO ORCHESTRA_MEMBER (EMAIL, PHONE_NUMBER, FIRSTNAME, LASTNAME, INSTRUMENT, ABSENCE_NUMBER)
VALUES ('calebsong@gmail.com', '111-111-1111', 'Caleb', 'Song', 'Violin', 0);
INSERT INTO ORCHESTRA_MEMBER (EMAIL, PHONE_NUMBER, FIRSTNAME, LASTNAME, INSTRUMENT, ABSENCE_NUMBER)
VALUES ('johndoe@gmail.com', '222-222-2222', 'Mary', 'Doe', 'Violin', 0);
INSERT INTO ORCHESTRA_MEMBER (EMAIL, PHONE_NUMBER, FIRSTNAME, LASTNAME, INSTRUMENT, ABSENCE_NUMBER)
VALUES ('johndoe@gmail.com', '222-222-2222', 'Charlie', 'Doe', 'Cello', 1);
INSERT INTO ORCHESTRA_MEMBER (EMAIL, PHONE_NUMBER, FIRSTNAME, LASTNAME, INSTRUMENT, ABSENCE_NUMBER)
VALUES ('janedoe@gmail.com', '333-333-3333', 'Jerry', 'Doe', 'Violin', 0);


INSERT INTO ORCHESTRA_GROUP (ORCHESTRA_LEVEL, EMAIL, FIRSTNAME)
VALUES (1, 'calebsong@gmail.com', 'Caleb');
INSERT INTO ORCHESTRA_GROUP (ORCHESTRA_LEVEL, EMAIL, FIRSTNAME)
VALUES (2, 'johndoe@gmail.com', 'Mary');
INSERT INTO ORCHESTRA_GROUP (ORCHESTRA_LEVEL, EMAIL, FIRSTNAME)
VALUES (3, 'johndoe@gmail.com', 'Charlie');
INSERT INTO ORCHESTRA_GROUP (ORCHESTRA_LEVEL, EMAIL, FIRSTNAME)
VALUES (3, 'janedoe@gmail.com', 'Jerry');